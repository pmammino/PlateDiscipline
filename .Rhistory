# botKzone <- 1.6
# inKzone <- -0.95
# outKzone <- 0.95
# kZone <- data.frame(
#   x=c(inKzone, inKzone, outKzone, outKzone, inKzone),
#   y=c(botKzone, topKzone, topKzone, botKzone, botKzone)
# )
predict_swing <- function(x)
{
if(nrow(all_splits[[x]]) > 100)
{
fit <- gam(swing ~ s(plate_x,plate_z), family=binomial, data=all_splits[[x]])
all_splits[[x]]$predict <- exp(predict(fit,all_splits[[x]]))/(1 + exp(predict(fit,all_splits[[x]])))
all_predict <- rbind(all_predict,all_splits[[x]])
}
}
#fit <- gam(swing ~ s(plate_x,plate_z), family=binomial, data=all_splits[[1]])
# find predicted probabilities over a 50 x 50 grid
# plate_x <- seq(-1.5, 1.5, length.out=100)
# plate_z <- seq(1.4, 3.75, length.out=100)
# data.predict <- data.frame(plate_x = c(outer(plate_x, plate_z * 0 + 1)),
#                            plate_z = c(outer(plate_x * 0 + 1, plate_z)))
# lp <- predict(fit, data.predict)
# data.predict$Probability <- exp(lp) / (1 + exp(lp))
#
# ggplot(kZone, aes(x, y)) +
#   geom_tile(data=data.predict,
#             aes(x=plate_x, y=plate_z, fill= Probability)) +
#   scale_fill_distiller(palette = "Spectral") +
#   geom_path(lwd=1.5, col="black") +
#   coord_fixed()+labs(title="Swing Rates")
#
# all_splits[[1]]$predict <- exp(predict(fit,all_splits[[1]]))/(1 + exp(predict(fit,all_splits[[1]])))
#
# all_predict <- rbind(all_predict,all_splits[[1]])
x <- predict_swing(30)
all_data <- lapply(1:length(all_splits), predict_swing)
all_data <- do.call("rbind", all_data)
in_zone <- all_data %>% filter(zone == 1 | zone == 2 | zone == 3 | zone == 4 | zone == 5 | zone == 6 | zone == 7 | zone == 8 |zone == 9)
out_of_zone <- all_data %>% filter(zone == 10 | zone == 11 | zone == 12 | zone == 13)
model_zone <- lmer(swing ~ predict + (1|pitcher) + (1|batter),
data = in_zone)
model_out_of_zone <- lmer(swing ~ predict + (1|pitcher) + (1|batter),
data = out_of_zone)
ranef(model_out_of_zone)
summary(model_out_of_zone)
summary(model_in_zone)
summary(model_zone)
in_zone_rates <- in_zone %>% group_by(player_name, pitcher) %>%
arrange(player_name, pitcher) %>%
summarise(Swing_Rate = mean(swing),
zSwing_rate = mean(predict))
View(in_zone_rates)
in_zone_rates$diff <- in_zone_rates$Swing_Rate - in_zone_rates$zSwing_rate
View(in_zone_rates)
in_zone_rates <- in_zone %>% group_by(player_name, pitcher) %>%
arrange(player_name, pitcher) %>%
summarise(Pitches = n(),
Swing_Rate = mean(swing),
xSwing_rate = mean(predict)) %>%
filter(Pitches >= 100)
in_zone_rates$diff <- in_zone_rates$Swing_Rate - in_zone_rates$zSwing_rate
in_zone_rates <- in_zone %>% group_by(player_name, pitcher) %>%
arrange(player_name, pitcher) %>%
summarise(Pitches = n(),
Swing_Rate = mean(swing),
xSwing_rate = mean(predict)) %>%
filter(Pitches >= 100)
in_zone_rates$diff <- in_zone_rates$Swing_Rate - in_zone_rates$xSwing_rate
out_of_zone_pitchers <- ranef(model_out_of_zone)$pitcher
View(out_of_zone_pitchers)
out_of_zone_rates <- out_of_zone %>% group_by(player_name, pitcher) %>%
arrange(player_name, pitcher) %>%
summarise(Pitches = n(),
Swing_Rate = mean(swing),
xSwing_rate = mean(predict)) %>%
filter(Pitches >= 100)
out_of_zone_rates$diff <- out_of_zone_rates$Swing_Rate - out_of_zone_rates$xSwing_rate
View(out_of_zone_pitchers)
View(out_of_zone_rates)
install.packages("rvest")
install.packages("V8")
library(rvest)
library(V8)
ct <- v8()
#parse the html content from the js output and print it as text
read_html(ct$eval(gsub('document.write','',firstnames))) %>%
html_text()
firstnames <- read_html(link) %>% html_nodes(".fname ng-binding") %>% html_nodes('script') %>% html_text()
# Create a new v8 context
ct <- v8()
#parse the html content from the js output and print it as text
read_html(ct$eval(gsub('document.write','',firstnames))) %>%
html_text()
#URL with js-rendered content to be scraped
link <- 'https://draft.shgn.com/nfc/plain/dp/559/grid'
#Read the html page content and extract all javascript codes that are inside a list
firstnames <- read_html(link) %>% html_nodes(".fname ng-binding") %>% html_nodes('script') %>% html_text()
# Create a new v8 context
ct <- v8()
#parse the html content from the js output and print it as text
read_html(ct$eval(gsub('document.write','',firstnames))) %>%
html_text()
link <- 'https://draft.shgn.com/nfc/plain/dp/559/grid'
#Read the html page content and extract all javascript codes that are inside a list
firstnames <- read_html(link) %>% html_nodes(".fname ng-binding")  %>% html_text()
# Create a new v8 context
ct <- v8()
#parse the html content from the js output and print it as text
read_html(ct$eval(gsub('document.write','',firstnames))) %>%
html_text()
#parse the html content from the js output and print it as text
read_html(ct$eval(gsub('document.write','',firstnames)))
# Create a new v8 context
ct <- v8()
taskscheduleR:::taskschedulerAddin()
taskscheduleR:::taskschedulerAddin()
taskscheduleR:::taskschedulerAddin()
taskscheduleR:::taskschedulerAddin()
library(googlesheets4)
library(mailR)
library(lubridate)
library(glue)
setwd("~/GitHub/PitchingPlan/PitchingPlan")
sheets_auth(
email = "pmammino18@gmail.com")
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
handedness <- read_sheet("https://docs.google.com/spreadsheets/d/1vttEPw3x9vLs7XY1c7YEW-VIc9uM1l4neDHY7icELVk/edit#gid=0")
monthlyplan <- read_sheet("https://docs.google.com/spreadsheets/d/1ovHuTCKfAjPnNYhAA6anlm_t0vM9hShvoX5Zd_IBGho/edit#gid=0")
monthlyplan <- data.frame(monthlyplan)
pre_post <- read_sheet("https://docs.google.com/spreadsheets/d/1ftejSW4anTwFeulb66EJLOuNldjLouU5twJ9eMShu6s/edit#gid=0")
groups<- read_sheet("https://docs.google.com/spreadsheets/d/1lKOTTEDnQ7zLLlOZ62R5vAOmkgBxw-OYbm_J7r30spo/edit#gid=0")
throwingkey <- read_sheet("https://docs.google.com/spreadsheets/d/1bCV7o-CDOEQYgCE7ditbymWbL-JrItV60vrikHy1-D4/edit#gid=0")
development <- read_sheet("https://docs.google.com/spreadsheets/d/1ME7B8PnkDzXQRl9DvpVGnMHcHQWYPVeNCp6AIzCHoQA/edit#gid=0")
saveRDS(ideals,"ideals.rds")
saveRDS(rapsodo,"rapsodo.rds")
saveRDS(handedness,"handedness.rds")
saveRDS(monthlyplan,"monthlyplan.rds")
saveRDS(pre_post,"pre_post.rds")
saveRDS(groups,"groups.rds")
saveRDS(throwingkey, "throwingkey.rds")
saveRDS(development,"development.rds")
pitchers <- as.list(unique(rapsodo$Pitcher))
daily_email <- function(pitcher)
{
monthlyplan$Start <- as.numeric(gsub("-.*","", monthlyplan$Week))
monthlyplan$End <- as.numeric(gsub(".*-","", monthlyplan$Week))
workout <- monthlyplan %>%
filter(Pitcher == pitcher) %>%
filter(Start <= day(Sys.Date())) %>%
filter(End >= day(Sys.Date()))
workout <- workout[,weekdays(Sys.Date())][1]
table <- throwingkey %>%
filter(Day == workout) %>%
select(Drill,Ball,Sets,Reps,Intensity)
table <- htmlTable(table,rnames = FALSE)
html_body <- paste0(glue("<p>Good Morning {pitcher},</p>"),
"<p>The Table below will show you your throwing program for today:</p>",
table,
"<p>If you need a reminder of the keys for you to focus on consult the link below</p>",
"<p><a href='https://pmammino18.shinyapps.io/pitchingplan/'>Link To App</a></p>")
send.mail(from = "pmammino18@gmail.com",
to = c("pmammino18@gmail.com"),
subject = paste0(glue("Daily Throwing For {pitcher} "),Sys.Date()),
body = html_body,
html = TRUE,
smtp = list(host.name = "smtp.gmail.com", port = 465,
user.name = "pmammino18@gmail.com",
passwd = "Wagner018",
ssl = TRUE),
authenticate = TRUE,
send = TRUE)
}
lapply(pitchers, daily_email)
rsconnect::deployApp(forceUpdate = TRUE)
lapply(pitchers, daily_email)
lapply(pitchers, daily_email)
workout <- monthlyplan %>%
filter(Pitcher == "Kevin Wiseman") %>%
filter(Start <= day(Sys.Date())) %>%
filter(End >= day(Sys.Date()))
View(monthlyplan)
library(tidyverse)
daily_email <- function(pitcher)
{
monthlyplan$Start <- as.numeric(gsub("-.*","", monthlyplan$Week))
monthlyplan$End <- as.numeric(gsub(".*-","", monthlyplan$Week))
workout <- monthlyplan %>%
filter(Pitcher == pitcher) %>%
filter(Start <= day(Sys.Date())) %>%
filter(End >= day(Sys.Date()))
workout <- workout[,weekdays(Sys.Date())][1]
table <- throwingkey %>%
filter(Day == workout) %>%
select(Drill,Ball,Sets,Reps,Intensity)
table <- htmlTable(table,rnames = FALSE)
html_body <- paste0(glue("<p>Good Morning {pitcher},</p>"),
"<p>The Table below will show you your throwing program for today:</p>",
table,
"<p>If you need a reminder of the keys for you to focus on consult the link below</p>",
"<p><a href='https://pmammino18.shinyapps.io/pitchingplan/'>Link To App</a></p>")
send.mail(from = "pmammino18@gmail.com",
to = c("pmammino18@gmail.com"),
subject = paste0(glue("Daily Throwing For {pitcher} "),Sys.Date()),
body = html_body,
html = TRUE,
smtp = list(host.name = "smtp.gmail.com", port = 465,
user.name = "pmammino18@gmail.com",
passwd = "Wagner018",
ssl = TRUE),
authenticate = TRUE,
send = TRUE)
}
lapply(pitchers, daily_email)
library(htmlTable)
lapply(pitchers, daily_email)
library(googlesheets4)
library(mailR)
library(lubridate)
library(glue)
library(tidyverse)
library(htmlTable)
setwd("~/GitHub/PitchingPlan/PitchingPlan")
sheets_auth(
email = "pmammino18@gmail.com")
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
handedness <- read_sheet("https://docs.google.com/spreadsheets/d/1vttEPw3x9vLs7XY1c7YEW-VIc9uM1l4neDHY7icELVk/edit#gid=0")
monthlyplan <- read_sheet("https://docs.google.com/spreadsheets/d/1ovHuTCKfAjPnNYhAA6anlm_t0vM9hShvoX5Zd_IBGho/edit#gid=0")
monthlyplan <- data.frame(monthlyplan)
pre_post <- read_sheet("https://docs.google.com/spreadsheets/d/1ftejSW4anTwFeulb66EJLOuNldjLouU5twJ9eMShu6s/edit#gid=0")
groups<- read_sheet("https://docs.google.com/spreadsheets/d/1lKOTTEDnQ7zLLlOZ62R5vAOmkgBxw-OYbm_J7r30spo/edit#gid=0")
throwingkey <- read_sheet("https://docs.google.com/spreadsheets/d/1bCV7o-CDOEQYgCE7ditbymWbL-JrItV60vrikHy1-D4/edit#gid=0")
development <- read_sheet("https://docs.google.com/spreadsheets/d/1ME7B8PnkDzXQRl9DvpVGnMHcHQWYPVeNCp6AIzCHoQA/edit#gid=0")
saveRDS(ideals,"ideals.rds")
saveRDS(rapsodo,"rapsodo.rds")
saveRDS(handedness,"handedness.rds")
saveRDS(monthlyplan,"monthlyplan.rds")
saveRDS(pre_post,"pre_post.rds")
saveRDS(groups,"groups.rds")
saveRDS(throwingkey, "throwingkey.rds")
saveRDS(development,"development.rds")
pitchers <- as.list(unique(rapsodo$Pitcher))
daily_email <- function(pitcher)
{
monthlyplan$Start <- as.numeric(gsub("-.*","", monthlyplan$Week))
monthlyplan$End <- as.numeric(gsub(".*-","", monthlyplan$Week))
workout <- monthlyplan %>%
filter(Pitcher == pitcher) %>%
filter(Start <= day(Sys.Date())) %>%
filter(End >= day(Sys.Date()))
workout <- workout[,weekdays(Sys.Date())][1]
table <- throwingkey %>%
filter(Day == workout) %>%
select(Drill,Ball,Sets,Reps,Intensity)
table <- htmlTable(table,rnames = FALSE)
html_body <- paste0(glue("<p>Good Morning {pitcher},</p>"),
"<p>The Table below will show you your throwing program for today:</p>",
table,
"<p>If you need a reminder of the keys for you to focus on consult the link below</p>",
"<p><a href='https://pmammino18.shinyapps.io/pitchingplan/'>Link To App</a></p>")
send.mail(from = "pmammino18@gmail.com",
to = c("pmammino18@gmail.com"),
subject = paste0(glue("Daily Throwing For {pitcher} "),Sys.Date()),
body = html_body,
html = TRUE,
smtp = list(host.name = "smtp.gmail.com", port = 465,
user.name = "pmammino18@gmail.com",
passwd = "Wagner018",
ssl = TRUE),
authenticate = TRUE,
send = TRUE)
}
lapply(pitchers, daily_email)
rsconnect::deployApp(forceUpdate = TRUE)
setwd("C:\Users\paulm\Documents\GitHub\PitchingPlan\PitchingPlan")
setwd("C:\\Users\\paulm\\Documents\\GitHub\\PitchingPlan\\PitchingPlan")
sheets_auth(
email = "pmammino18@gmail.com")
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
handedness <- read_sheet("https://docs.google.com/spreadsheets/d/1vttEPw3x9vLs7XY1c7YEW-VIc9uM1l4neDHY7icELVk/edit#gid=0")
monthlyplan <- read_sheet("https://docs.google.com/spreadsheets/d/1ovHuTCKfAjPnNYhAA6anlm_t0vM9hShvoX5Zd_IBGho/edit#gid=0")
monthlyplan <- data.frame(monthlyplan)
pre_post <- read_sheet("https://docs.google.com/spreadsheets/d/1ftejSW4anTwFeulb66EJLOuNldjLouU5twJ9eMShu6s/edit#gid=0")
groups<- read_sheet("https://docs.google.com/spreadsheets/d/1lKOTTEDnQ7zLLlOZ62R5vAOmkgBxw-OYbm_J7r30spo/edit#gid=0")
throwingkey <- read_sheet("https://docs.google.com/spreadsheets/d/1bCV7o-CDOEQYgCE7ditbymWbL-JrItV60vrikHy1-D4/edit#gid=0")
development <- read_sheet("https://docs.google.com/spreadsheets/d/1ME7B8PnkDzXQRl9DvpVGnMHcHQWYPVeNCp6AIzCHoQA/edit#gid=0")
saveRDS(ideals,"ideals.rds")
saveRDS(rapsodo,"rapsodo.rds")
saveRDS(handedness,"handedness.rds")
saveRDS(monthlyplan,"monthlyplan.rds")
saveRDS(pre_post,"pre_post.rds")
saveRDS(groups,"groups.rds")
saveRDS(throwingkey, "throwingkey.rds")
saveRDS(development,"development.rds")
library(googlesheets4)
library(mailR)
library(lubridate)
library(glue)
library(tidyverse)
library(htmlTable)
setwd("C:\\Users\\paulm\\Documents\\GitHub\\PitchingPlan\\PitchingPlan")
sheets_auth(
email = "pmammino18@gmail.com")
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
handedness <- read_sheet("https://docs.google.com/spreadsheets/d/1vttEPw3x9vLs7XY1c7YEW-VIc9uM1l4neDHY7icELVk/edit#gid=0")
monthlyplan <- read_sheet("https://docs.google.com/spreadsheets/d/1ovHuTCKfAjPnNYhAA6anlm_t0vM9hShvoX5Zd_IBGho/edit#gid=0")
monthlyplan <- data.frame(monthlyplan)
pre_post <- read_sheet("https://docs.google.com/spreadsheets/d/1ftejSW4anTwFeulb66EJLOuNldjLouU5twJ9eMShu6s/edit#gid=0")
groups<- read_sheet("https://docs.google.com/spreadsheets/d/1lKOTTEDnQ7zLLlOZ62R5vAOmkgBxw-OYbm_J7r30spo/edit#gid=0")
throwingkey <- read_sheet("https://docs.google.com/spreadsheets/d/1bCV7o-CDOEQYgCE7ditbymWbL-JrItV60vrikHy1-D4/edit#gid=0")
development <- read_sheet("https://docs.google.com/spreadsheets/d/1ME7B8PnkDzXQRl9DvpVGnMHcHQWYPVeNCp6AIzCHoQA/edit#gid=0")
saveRDS(ideals,"ideals.rds")
saveRDS(rapsodo,"rapsodo.rds")
saveRDS(handedness,"handedness.rds")
saveRDS(monthlyplan,"monthlyplan.rds")
saveRDS(pre_post,"pre_post.rds")
saveRDS(groups,"groups.rds")
saveRDS(throwingkey, "throwingkey.rds")
saveRDS(development,"development.rds")
library(googlesheets4)
library(mailR)
library(lubridate)
library(glue)
library(tidyverse)
library(htmlTable)
setwd("C:\\Users\\paulm\\Documents\\GitHub\\PitchingPlan\\PitchingPlan")
sheets_auth(
email = "pmammino18@gmail.com")
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
handedness <- read_sheet("https://docs.google.com/spreadsheets/d/1vttEPw3x9vLs7XY1c7YEW-VIc9uM1l4neDHY7icELVk/edit#gid=0")
monthlyplan <- read_sheet("https://docs.google.com/spreadsheets/d/1ovHuTCKfAjPnNYhAA6anlm_t0vM9hShvoX5Zd_IBGho/edit#gid=0")
monthlyplan <- data.frame(monthlyplan)
pre_post <- read_sheet("https://docs.google.com/spreadsheets/d/1ftejSW4anTwFeulb66EJLOuNldjLouU5twJ9eMShu6s/edit#gid=0")
groups<- read_sheet("https://docs.google.com/spreadsheets/d/1lKOTTEDnQ7zLLlOZ62R5vAOmkgBxw-OYbm_J7r30spo/edit#gid=0")
throwingkey <- read_sheet("https://docs.google.com/spreadsheets/d/1bCV7o-CDOEQYgCE7ditbymWbL-JrItV60vrikHy1-D4/edit#gid=0")
development <- read_sheet("https://docs.google.com/spreadsheets/d/1ME7B8PnkDzXQRl9DvpVGnMHcHQWYPVeNCp6AIzCHoQA/edit#gid=0")
saveRDS(ideals,"ideals.rds")
saveRDS(rapsodo,"rapsodo.rds")
saveRDS(handedness,"handedness.rds")
saveRDS(monthlyplan,"monthlyplan.rds")
saveRDS(pre_post,"pre_post.rds")
saveRDS(groups,"groups.rds")
saveRDS(throwingkey, "throwingkey.rds")
saveRDS(development,"development.rds")
pitchers <- as.list(unique(rapsodo$Pitcher))
daily_email <- function(pitcher)
{
monthlyplan$Start <- as.numeric(gsub("-.*","", monthlyplan$Week))
monthlyplan$End <- as.numeric(gsub(".*-","", monthlyplan$Week))
workout <- monthlyplan %>%
filter(Pitcher == pitcher) %>%
filter(Start <= day(Sys.Date())) %>%
filter(End >= day(Sys.Date()))
workout <- workout[,weekdays(Sys.Date())][1]
table <- throwingkey %>%
filter(Day == workout) %>%
select(Drill,Ball,Sets,Reps,Intensity)
table <- htmlTable(table,rnames = FALSE)
html_body <- paste0(glue("<p>Good Morning {pitcher},</p>"),
"<p>The Table below will show you your throwing program for today:</p>",
table,
"<p>If you need a reminder of the keys for you to focus on consult the link below</p>",
"<p><a href='https://pmammino18.shinyapps.io/pitchingplan/'>Link To App</a></p>")
send.mail(from = "pmammino18@gmail.com",
to = c("pmammino18@gmail.com"),
subject = paste0(glue("Daily Throwing For {pitcher} "),Sys.Date()),
body = html_body,
html = TRUE,
smtp = list(host.name = "smtp.gmail.com", port = 465,
user.name = "pmammino18@gmail.com",
passwd = "Wagner018",
ssl = TRUE),
authenticate = TRUE,
send = TRUE)
}
lapply(pitchers, daily_email)
rsconnect::deployApp(forceUpdate = TRUE)
library(googlesheets4)
library(mailR)
library(lubridate)
library(glue)
library(tidyverse)
library(htmlTable)
setwd("C:\\Users\\paulm\\Documents\\GitHub\\PitchingPlan\\PitchingPlan")
sheets_auth(
email = "pmammino18@gmail.com")
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
handedness <- read_sheet("https://docs.google.com/spreadsheets/d/1vttEPw3x9vLs7XY1c7YEW-VIc9uM1l4neDHY7icELVk/edit#gid=0")
monthlyplan <- read_sheet("https://docs.google.com/spreadsheets/d/1ovHuTCKfAjPnNYhAA6anlm_t0vM9hShvoX5Zd_IBGho/edit#gid=0")
monthlyplan <- data.frame(monthlyplan)
pre_post <- read_sheet("https://docs.google.com/spreadsheets/d/1ftejSW4anTwFeulb66EJLOuNldjLouU5twJ9eMShu6s/edit#gid=0")
groups<- read_sheet("https://docs.google.com/spreadsheets/d/1lKOTTEDnQ7zLLlOZ62R5vAOmkgBxw-OYbm_J7r30spo/edit#gid=0")
throwingkey <- read_sheet("https://docs.google.com/spreadsheets/d/1bCV7o-CDOEQYgCE7ditbymWbL-JrItV60vrikHy1-D4/edit#gid=0")
development <- read_sheet("https://docs.google.com/spreadsheets/d/1ME7B8PnkDzXQRl9DvpVGnMHcHQWYPVeNCp6AIzCHoQA/edit#gid=0")
saveRDS(ideals,"ideals.rds")
saveRDS(rapsodo,"rapsodo.rds")
saveRDS(handedness,"handedness.rds")
saveRDS(monthlyplan,"monthlyplan.rds")
saveRDS(pre_post,"pre_post.rds")
saveRDS(groups,"groups.rds")
saveRDS(throwingkey, "throwingkey.rds")
saveRDS(development,"development.rds")
pitchers <- as.list(unique(rapsodo$Pitcher))
daily_email <- function(pitcher)
{
monthlyplan$Start <- as.numeric(gsub("-.*","", monthlyplan$Week))
monthlyplan$End <- as.numeric(gsub(".*-","", monthlyplan$Week))
workout <- monthlyplan %>%
filter(Pitcher == pitcher) %>%
filter(Start <= day(Sys.Date())) %>%
filter(End >= day(Sys.Date()))
workout <- workout[,weekdays(Sys.Date())][1]
table <- throwingkey %>%
filter(Day == workout) %>%
select(Drill,Ball,Sets,Reps,Intensity)
table <- htmlTable(table,rnames = FALSE)
html_body <- paste0(glue("<p>Good Morning {pitcher},</p>"),
"<p>The Table below will show you your throwing program for today:</p>",
table,
"<p>If you need a reminder of the keys for you to focus on consult the link below</p>",
"<p><a href='https://pmammino18.shinyapps.io/pitchingplan/'>Link To App</a></p>")
send.mail(from = "pmammino18@gmail.com",
to = c("pmammino18@gmail.com"),
subject = paste0(glue("Daily Throwing For {pitcher} "),Sys.Date()),
body = html_body,
html = TRUE,
smtp = list(host.name = "smtp.gmail.com", port = 465,
user.name = "pmammino18@gmail.com",
passwd = "Wagner018",
ssl = TRUE),
authenticate = TRUE,
send = TRUE)
}
lapply(pitchers, daily_email)
rsconnect::deployApp(forceUpdate = TRUE)
library(googlesheets4)
library(mailR)
library(lubridate)
library(glue)
library(tidyverse)
library(htmlTable)
setwd("C:\\Users\\paulm\\Documents\\GitHub\\PitchingPlan\\PitchingPlan")
sheets_auth(
email = "pmammino18@gmail.com")
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
handedness <- read_sheet("https://docs.google.com/spreadsheets/d/1vttEPw3x9vLs7XY1c7YEW-VIc9uM1l4neDHY7icELVk/edit#gid=0")
monthlyplan <- read_sheet("https://docs.google.com/spreadsheets/d/1ovHuTCKfAjPnNYhAA6anlm_t0vM9hShvoX5Zd_IBGho/edit#gid=0")
monthlyplan <- data.frame(monthlyplan)
pre_post <- read_sheet("https://docs.google.com/spreadsheets/d/1ftejSW4anTwFeulb66EJLOuNldjLouU5twJ9eMShu6s/edit#gid=0")
groups<- read_sheet("https://docs.google.com/spreadsheets/d/1lKOTTEDnQ7zLLlOZ62R5vAOmkgBxw-OYbm_J7r30spo/edit#gid=0")
throwingkey <- read_sheet("https://docs.google.com/spreadsheets/d/1bCV7o-CDOEQYgCE7ditbymWbL-JrItV60vrikHy1-D4/edit#gid=0")
development <- read_sheet("https://docs.google.com/spreadsheets/d/1ME7B8PnkDzXQRl9DvpVGnMHcHQWYPVeNCp6AIzCHoQA/edit#gid=0")
saveRDS(ideals,"ideals.rds")
saveRDS(rapsodo,"rapsodo.rds")
saveRDS(handedness,"handedness.rds")
saveRDS(monthlyplan,"monthlyplan.rds")
saveRDS(pre_post,"pre_post.rds")
saveRDS(groups,"groups.rds")
saveRDS(throwingkey, "throwingkey.rds")
saveRDS(development,"development.rds")
pitchers <- as.list(unique(rapsodo$Pitcher))
daily_email <- function(pitcher)
{
monthlyplan$Start <- as.numeric(gsub("-.*","", monthlyplan$Week))
monthlyplan$End <- as.numeric(gsub(".*-","", monthlyplan$Week))
workout <- monthlyplan %>%
filter(Pitcher == pitcher) %>%
filter(Start <= day(Sys.Date())) %>%
filter(End >= day(Sys.Date()))
workout <- workout[,weekdays(Sys.Date())][1]
table <- throwingkey %>%
filter(Day == workout) %>%
select(Drill,Ball,Sets,Reps,Intensity)
table <- htmlTable(table,rnames = FALSE)
html_body <- paste0(glue("<p>Good Morning {pitcher},</p>"),
"<p>The Table below will show you your throwing program for today:</p>",
table,
"<p>If you need a reminder of the keys for you to focus on consult the link below</p>",
"<p><a href='https://pmammino18.shinyapps.io/pitchingplan/'>Link To App</a></p>")
send.mail(from = "pmammino18@gmail.com",
to = c("pmammino18@gmail.com"),
subject = paste0(glue("Daily Throwing For {pitcher} "),Sys.Date()),
body = html_body,
html = TRUE,
smtp = list(host.name = "smtp.gmail.com", port = 465,
user.name = "pmammino18@gmail.com",
passwd = "Wagner018",
ssl = TRUE),
authenticate = TRUE,
send = TRUE)
}
lapply(pitchers, daily_email)
rsconnect::deployApp(forceUpdate = TRUE)
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
saveRDS(rapsodo,"rapsodo.rds")
rsconnect::deployApp(forceUpdate = TRUE)
rapsodo <- read_sheet("https://docs.google.com/spreadsheets/d/1IJwrKgo2N8SSWmOEHmaNICxG6Nx2RPQppaI2ozz7LhI/edit#gid=0")
saveRDS(rapsodo,"rapsodo.rds")
rsconnect::deployApp(forceUpdate = TRUE)
ideals <- read_sheet("https://docs.google.com/spreadsheets/d/1OKspMLQyR0LdI889pzpjoHqgpJDIiNlR9eTf9XNxpUo/edit#gid=0")
saveRDS(ideals,"ideals.rds")
rsconnect::deployApp(forceUpdate = TRUE)
setwd("~/GitHub/plate_discipline")
all_seasons_pt <- readRDS("all_results_allpitches_allseasons.rds")
View(all_seasons_pt)
